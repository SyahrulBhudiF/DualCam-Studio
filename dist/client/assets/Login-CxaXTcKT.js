import{h as l,l as c,s as g,j as a}from"./main-DZWvjlLQ.js";import{u}from"./useMutation-D6MBcEm7.js";import{g as p}from"./utils-CwvXAYlB.js";import{A as f}from"./Auth-CDGuL-lf.js";function w(){const n=l(),r=u({mutationFn:c,onSuccess:async t=>{t?.error||(await n.invalidate(),n.navigate({to:"/admin/dashboard"}))}}),m=u({mutationFn:g}),d=p(r.error),s=r.data?.error?r.data.message:null,e=d||s;return a.jsx(f,{actionText:"Login",status:r.status,onSubmit:t=>{t.preventDefault();const o=new FormData(t.target);r.mutate({data:{email:o.get("email"),password:o.get("password")}})},afterSubmit:a.jsxs(a.Fragment,{children:[e&&a.jsx("div",{className:"text-red-400",children:e}),s==="Invalid login credentials"&&a.jsx("div",{children:a.jsx("button",{className:"text-blue-500",onClick:t=>{const o=t.currentTarget.form;if(!o)return;const i=new FormData(o);m.mutate({data:{email:i.get("email"),password:i.get("password"),redirectUrl:"/"}})},type:"button",children:"Sign up instead?"})})]})})}export{w as L};
